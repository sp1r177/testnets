# üîó –°–∏—Å—Ç–µ–º–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫

## –û–±–∑–æ—Ä

–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç **—É–Ω–∏–∫–∞–ª—å–Ω—É—é —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É** —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤, —É—Å–ø–µ—à–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–π.

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞–µ—Ç—Å—è **—É–Ω–∏–∫–∞–ª—å–Ω—ã–π 8-—Å–∏–º–≤–æ–ª—å–Ω—ã–π –∫–æ–¥** –∏–∑ –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä:

```
–ü—Ä–∏–º–µ—Ä: REF4B8K9
```

–°—Å—ã–ª–∫–∞ –∏–º–µ–µ—Ç –≤–∏–¥:
```
https://t.me/your_bot?start=ref_REF4B8K9
```

### 2. –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ

–ö–æ–≥–¥–∞ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ:

1. **–ö–ª–∏–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è** - —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å—á–µ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤
2. Telegram –±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/start ref_REF4B8K9`
3. –ë–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WebApp —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `?refCode=REF4B8K9`
4. WebApp –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç ID —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ –ø–æ –∫–æ–¥—É

### 3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø—Ä–∏–≤—è–∑–∫–∞

–ü—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

1. –°–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ –ø–æ –∫–æ–¥—É
2. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `referrals`
3. –£ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `referrer_id`
4. –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å—á–µ—Ç—á–∏–∫ —É—Å–ø–µ—à–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

### 4. –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–π

–ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ –ø–æ–¥–ø–∏—Å–∫–∏ —Ä–µ—Ñ–µ—Ä–∏—Ä—É–µ–º—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:

1. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è 50% –∫–æ–º–∏—Å—Å–∏—è –æ—Ç —Å—É–º–º—ã –ø–æ–∫—É–ø–∫–∏
2. –ö–æ–º–∏—Å—Å–∏—è –∑–∞—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –±–∞–ª–∞–Ω—Å —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ –≤ Stars
3. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –¥–æ—Ö–æ–¥–æ–≤

## üìä API Endpoints

### –ü–æ–ª—É—á–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
```
GET /api/referral/link/:userId
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "referral_code": "REF4B8K9",
  "referral_link": "https://t.me/your_bot?start=ref_REF4B8K9",
  "stats": {
    "clicks": 15,
    "successful_referrals": 3
  },
  "share_text": "üß† –£–∑–Ω–∞–π —Å–≤–æ–π –∞—Ä—Ö–µ—Ç–∏–ø –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö!..."
}
```

### –û—Ç—Å–ª–µ–¥–∏—Ç—å –∫–ª–∏–∫
```
POST /api/referral/track-click
{
  "code": "REF4B8K9"
}
```

### –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–¥–µ
```
GET /api/referral/code/REF4B8K9
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
```
GET /api/referral/stats/:userId
```

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `referral_codes`
```sql
CREATE TABLE referral_codes (
    id INTEGER PRIMARY KEY,
    user_id INTEGER NOT NULL,
    code TEXT UNIQUE NOT NULL,           -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ (REF4B8K9)
    clicks INTEGER DEFAULT 0,           -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤
    successful_referrals INTEGER DEFAULT 0,  -- –£—Å–ø–µ—à–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    expires_at DATETIME,                 -- –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    is_active INTEGER DEFAULT 1         -- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–¥–∞
);
```

### –¢–∞–±–ª–∏—Ü–∞ `referrals`
```sql
CREATE TABLE referrals (
    id INTEGER PRIMARY KEY,
    referrer_id INTEGER,                 -- ID –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–≥–æ
    referred_id INTEGER,                 -- ID –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ
    reward_paid REAL DEFAULT 0,         -- –í—ã–ø–ª–∞—á–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞
    first_purchase_made INTEGER DEFAULT 0,  -- –°–¥–µ–ª–∞–ª –ª–∏ –ø–µ—Ä–≤—É—é –ø–æ–∫—É–ø–∫—É
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

## üí∞ –°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π

### –†–∞–∑–º–µ—Ä –∫–æ–º–∏—Å—Å–∏–π
- **50%** –æ—Ç —Å—É–º–º—ã –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏ —Ä–µ—Ñ–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í—ã–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ Telegram Stars –Ω–∞ –±–∞–ª–∞–Ω—Å —Ä–µ—Ñ–µ—Ä–µ—Ä–∞

### –ü—Ä–∏–º–µ—Ä—ã –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π
| –ü–æ–∫—É–ø–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞ | –ö–æ–º–∏—Å—Å–∏—è —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ |
|------------------|-------------------|
| 149‚ÇΩ             | 74.5‚ÇΩ (74 Stars) |
| 499‚ÇΩ             | 249.5‚ÇΩ (250 Stars) |
| 999‚ÇΩ             | 499.5‚ÇΩ (500 Stars) |

## üé® –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Frontend

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```javascript
async function getUserReferralLink(userId) {
    const response = await fetch(`/api/referral/link/${userId}`);
    const data = await response.json();
    
    return {
        link: data.referral_link,
        code: data.referral_code,
        shareText: data.share_text,
        stats: data.stats
    };
}
```

### –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"

```javascript
function shareReferralLink(link, shareText) {
    if (navigator.share) {
        navigator.share({
            title: 'AI-–∞–Ω–∞–ª–∏–∑ –æ—Ç–Ω–æ—à–µ–Ω–∏–π',
            text: shareText,
            url: link
        });
    } else {
        // Fallback - –∫–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        navigator.clipboard.writeText(shareText);
        showNotification('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
    }
}
```

## üì± –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```html
<div class="referral-section">
    <h3>üíù –ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–∑–µ–π</h3>
    <div class="referral-stats">
        <div class="stat">
            <span class="number">15</span>
            <span class="label">–ö–ª–∏–∫–æ–≤</span>
        </div>
        <div class="stat">
            <span class="number">3</span>
            <span class="label">–†–µ—Ñ–µ—Ä–∞–ª–æ–≤</span>
        </div>
        <div class="stat">
            <span class="number">750</span>
            <span class="label">Stars –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</span>
        </div>
    </div>
    
    <button class="share-btn" onclick="shareReferralLink()">
        üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π
    </button>
    
    <div class="referral-link">
        <input type="text" value="https://t.me/your_bot?start=ref_REF4B8K9" readonly>
        <button onclick="copyLink()">üìã</button>
    </div>
</div>
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–æ–≤
- –ö–æ–¥—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ –∏–∑ 36 —Å–∏–º–≤–æ–ª–æ–≤ (A-Z, 0-9)
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ–ª–ª–∏–∑–∏–∏: 1 –∫ 36^8 = 1:2,821,109,907,456
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
- –û–¥–∏–Ω —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–µ–ª—å–∑—è –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å —Å–∞–º–æ–≥–æ —Å–µ–±—è
- –ö–æ–º–º–∏—Å—Å–∏—è –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞ –ø–µ—Ä–≤—É—é –ø–æ–∫—É–ø–∫—É

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–ª–∏–∫–æ–≤ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–æ–¥–æ–≤

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `BOT_USERNAME`:

```env
BOT_USERNAME=relationship_ai_bot
WEBAPP_URL=https://yourdomain.com
```

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—É `referral_codes` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

## üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –¢–æ–ø —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
```
GET /api/referral/leaderboard
```

### –ò—Å—Ç–æ—Ä–∏—è –¥–æ—Ö–æ–¥–æ–≤
```
GET /api/referral/earnings/:userId
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∫–ª–∏–∫–æ–≤ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –°—Ä–µ–¥–Ω–∏–π –¥–æ—Ö–æ–¥ —Å —Ä–µ—Ñ–µ—Ä–∞–ª–∞
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –¥—Ä—É–∑–µ–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ–º –∫–æ–º–∏—Å—Å–∏–π.